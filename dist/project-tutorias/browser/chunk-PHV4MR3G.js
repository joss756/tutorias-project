import{a as H}from"./chunk-K2BBKBCA.js";import{m as P}from"./chunk-7FHZTGIO.js";import{$ as c,D as C,E as I,Fa as $,Ga as k,Ha as D,Ia as R,Ma as A,O as o,S as g,T as L,U as m,Ua as v,X as f,ba as y,da as r,ea as n,ia as E,ka as S,la as s,ma as j,na as a,oa as M,qa as F,w as x,wa as O,x as p,xa as w,ya as T,z as b}from"./chunk-PBJI7WEI.js";var l=class i{constructor(e){this.http=e}api="http://localhost:3000/api/notificaciones";listar(e){return this.http.get(`${this.api}/usuario/${e}`)}marcarLeida(e){return this.http.put(`${this.api}/${e}/leer`,{})}static \u0275fac=function(t){return new(t||i)(b(A))};static \u0275prov=x({token:i,factory:i.\u0275fac,providedIn:"root"})};function q(i,e){if(i&1&&(r(0,"p",3),a(1),n()),i&2){let t=s();o(),M(t.error)}}function z(i,e){if(i&1){let t=E();r(0,"button",6),S("click",function(){C(t);let N=s().$implicit,B=s(2);return I(B.marcarLeida(N))}),a(1," Marcar como le\xEDda "),n()}}function G(i,e){if(i&1&&(r(0,"li")(1,"span"),a(2),O(3,"date"),n(),f(4,z,2,0,"button",5),n()),i&2){let t=e.$implicit;o(),y("leida",t.leida),o(),F(" ",t.mensaje," (",w(3,5,t.fecha,"short"),") "),o(2),c("ngIf",!t.leida)}}function J(i,e){if(i&1&&(r(0,"ul"),f(1,G,5,8,"li",4),n()),i&2){let t=s();o(),c("ngForOf",t.notificaciones)}}function K(i,e){i&1&&(r(0,"p"),a(1,"No tienes notificaciones."),n())}var u=class i{constructor(e,t){this.svc=e;this.auth=t}notificaciones=[];error="";ngOnInit(){let e=this.auth.getUsuarioActual();if(!e?.id){this.error="No se pudo determinar el usuario";return}this.svc.listar(e.id).subscribe({next:t=>this.notificaciones=t,error:t=>this.error="Error al cargar notificaciones"})}marcarLeida(e){this.svc.marcarLeida(e.id).subscribe(()=>{e.leida=!0})}static \u0275fac=function(t){return new(t||i)(g(l),g(H))};static \u0275cmp=L({type:i,selectors:[["app-listar-notificaciones"]],standalone:!1,decls:6,vars:3,consts:[["sinNotif",""],["class","error",4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"error"],[4,"ngFor","ngForOf"],[3,"click",4,"ngIf"],[3,"click"]],template:function(t,_){if(t&1&&(r(0,"h2"),a(1,"Notificaciones"),n(),f(2,q,2,1,"p",1)(3,J,2,1,"ul",2)(4,K,2,0,"ng-template",null,0,T)),t&2){let N=j(5);o(2),c("ngIf",_.error),o(),c("ngIf",_.notificaciones.length)("ngIfElse",N)}},dependencies:[$,k,D],encapsulation:2})};var Q=[{path:"",component:u}],d=class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=m({type:i});static \u0275inj=p({imports:[v.forChild(Q),v]})};var V=class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=m({type:i});static \u0275inj=p({imports:[R,P,d]})};export{V as NotificacionesModule};
