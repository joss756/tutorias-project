import{Ma as a,t as r,w as n,z as i}from"./chunk-PBJI7WEI.js";var l=class e{constructor(t){this.http=t}apiUrl="http://localhost:3000/api/auth";login(t){return this.http.post(`${this.apiUrl}/login`,t).pipe(r(o=>{if(typeof window<"u"){localStorage.setItem("token",o.token);let u={id:o.id,nombre:o.nombre,correo:o.correo,rol:o.rol};localStorage.setItem("usuario",JSON.stringify(u))}}))}logout(){typeof window<"u"&&(localStorage.removeItem("token"),localStorage.removeItem("usuario"))}getUsuarioActual(){let t=localStorage.getItem("usuario");return t?JSON.parse(t):null}getRol(){let t=localStorage.getItem("usuario");if(!t)return null;try{return JSON.parse(t).rol||null}catch{return null}}isAuthenticated(){return typeof window>"u"?!1:!!localStorage.getItem("token")}static \u0275fac=function(o){return new(o||e)(i(a))};static \u0275prov=n({token:e,factory:e.\u0275fac,providedIn:"root"})};export{l as a};
